pipeline {
    agent any
    stages {
        stage('Build') {
            steps {
                bat "\"C:/Program Files/dotnet/dotnet.exe\" restore \"${workspace}/MVC Project.sln\""
                bat "\"C:/Program Files/dotnet/dotnet.exe\" build \"${workspace}/MVC Project.sln\""
            }  
        }
        stage('Test') {
            steps {
                bat returnStatus: true, script: "\"C:/Program Files/dotnet/dotnet.exe\" test \"${workspace}/MVC Project.sln\" --logger \"trx;LogFileName=unit_tests.xml\" --no-build"
                    step([$class: 'NUnitPublisher', testResultsFile:"**/unit_tests.xml", failOnError: true, keepLongStdio: true])

}
        }
    
    }
}